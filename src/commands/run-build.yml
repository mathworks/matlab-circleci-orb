description: >
  Execute the MATLAB Build Tool to execute a build. MATLAB exits with exit code 0 if all specified
  tasks execute successfully without error. Otherwise, MATLAB terminates with a nonzero exit code,
  which causes the build to fail.

parameters:
  tasks:
    description: >
      Space-separated list of tasks to run. If not specified, the action runs the default tasks 
      in the plan returned by buildfile.m as well as all the tasks on which they depend.
    type: string
    default: ""
  no-output-timeout:
    description: >
      Elapsed time the command can run without output. The string is a decimal with unit suffix,
      such as “20m”, “1.25h”, “5s”. The default is 10 minutes and the maximum is governed by the
      maximum time a job is allowed to run.
    type: string
    default: 10m

steps:
  - run:
      name: Run MATLAB build
      environment:
        PARAM_TASKS: <<parameters.tasks>>
      command: <<include(scripts/run-build.sh)>>
      shell: bash
      no_output_timeout: <<parameters.no-output-timeout>>
