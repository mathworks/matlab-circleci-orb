function scriptText = custom_genscript(varargin)
    %GENSCRIPT Generate a MATLAB script for running tests.
    
    % Define the script as a single string with newline characters
    scriptText = [...
    "import matlab.unittest.TestRunner;", ...
    newline, ...
    "import matlab.unittest.plugins.XMLPlugin;", ...
    newline, ... 
    "import matlab.unittest.TestSuite;", ...
    newline, ...
    "suites = {};", ...
    newline, ...
    "for i = 1:length(TestFiles)", ...
    newline, ...
    "    testFilePath = fullfile('.', [TestFiles{i}, '.m']);", ...
    newline, ...

    "    suites{end+1} = TestSuite.fromFile(testFilePath);",...
    newline, ...
    "end", ...
    newline, ...
    "suite = [suites{:}];", ...
    newline, ...
    "runner = TestRunner.withTextOutput();", ...
    newline, ...
    "runner.addPlugin(XMLPlugin.producingJUnitFormat('results.xml'));", ...
    newline, ... 
    "results = runner.run(suite);", ...
    newline, ...
    "display(results);", ...
    newline, ...
    "assertSuccess(results);"];
    
    % Convert the string array to a single string (if it's not already)
    scriptText = join(scriptText, "");
    
    % Convert to character array if specifically requested to be of char type
    scriptText = char(scriptText);
    
    end
